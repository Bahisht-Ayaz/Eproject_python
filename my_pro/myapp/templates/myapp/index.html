{% extends "master.html" %}

{% block content %}
<!-- Hero / Slider Section -->
<section class="slider">
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <div class="block">
          <h1 class="animated fadeInUp">Stay Updated with <br> Real-Time Weather & Climate Insights</h1>
          <p class="animated fadeInUp" style="color: #ffffff;">
  Get accurate forecasts, monitor climate changes, and explore the worldâ€™s weather patterns in one place.
</p>

          <a href="weatherupdate" class="btn-main">Check Live Weather</a>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- About Section -->
<section class="about section">
  <div class="container">
    <div class="row">
      <div class="col-md-7">
        <div class="block">
          <div class="section-title">
            <h2>About ClimateTrack</h2>
            <p>
              ClimateTrack is a modern weather monitoring platform that provides up-to-date forecasts,
              climate analytics, and environmental awareness insights for users across the globe.
            </p>
          </div>
          <p>
            Our mission is to empower communities with accurate and accessible climate information. From temperature trends
            to air quality and rainfall prediction â€” we bring science closer to your daily life. Whether you're planning a trip
            or studying global warming, ClimateTrack helps you stay informed.
          </p>
        </div>
      </div>
      <div class="col-md-5">
        <div class="block">
          <img src="/static/images/img1.jpg" alt="Weather Dashboard">
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Feature Section -->
<section class="feature bg-2"
         style="position: relative;
                background-image: url('/static/images/nature.jpg');
                background-size: cover;
                background-position: center;
                background-repeat: no-repeat;
                color: white;
                padding: 80px 0;">

  <!-- Lighter dark overlay -->
  <div style="position: absolute;
              top: 0; left: 0;
              width: 100%; height: 100%;
              background: rgba(0, 0, 0, 0.4);
              z-index: 1;"></div>

  <div class="container" style="position: relative; z-index: 2;">
    <div class="row justify-content-end">
      <div class="col-md-6" style="padding: 30px; border-radius: 10px;">
        <h2 class="section-subtitle" style="color:white;">Understanding the Power of Nature</h2>
        <p style="color:whitesmoke;">
          Weather shapes our lives â€” from the food we eat to the clothes we wear. ClimateTrack combines technology and science
          to deliver meaningful insights that help you adapt and plan better.
        </p>
        <p style="color:whitesmoke;">
          Track storms, heatwaves, or rainfall patterns anywhere in the world. Stay aware, stay safe, and contribute to
          a greener planet by understanding how our environment changes over time.
        </p>
       <a href="weatherupdate"
   style="background: #6c757d; /* grey color */
          color: #fff;
          padding: 10px 25px;
          border-radius: 30px;
          text-decoration: none;
          font-weight: 600;
          transition: all 0.3s ease;
          display: inline-block;">
  View Forecasts
</a>

<style>
  a[href="weatherupdate"]:hover {
    background: #5a6268; /* darker grey on hover */
    color: #fff;
    transform: translateY(-2px);
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
  }
</style>

      </div>
    </div>
  </div>
</section>

<!-- Live Karachi Weather Section -->


<!-- ðŸŒ¤ Karachi Live Weather (Clean White Theme) -->
<section id="karachi-weather" style="padding: 60px 0; background: #ffffff; color: #333;">
  <div class="container text-center">
    <h2 class="mb-4" style="font-size: 2.2rem; color: #333;">ðŸŒ¤ Karachi Live Weather</h2>

    <div id="loading" style="display: none;">
      <div class="spinner-border text-secondary" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
      <p class="mt-2">Updating weather data...</p>
    </div>

    <div class="card shadow-sm p-4 mb-4"
         style="background: #f9f9f9; border: 1px solid #e0e0e0; border-radius: 12px;">
      <h3 id="currentTemp" style="font-size: 3rem; color: #007BFF;">--Â°C</h3>
      <p id="description" style="font-size: 1.3rem;">Loading...</p>
      <p><span id="humidity">--%</span> humidity | <span id="wind">-- km/h</span> wind</p>
    </div>

    <h4 class="mb-4" style="font-size: 1.5rem; color: #444;">Next 24-Hour Temperature Trend</h4>
    <div class="chart-container" style="position: relative; height:400px; width:100%;">
      <canvas id="tempChart"></canvas>
    </div>
  </div>
</section>

<!-- Chart.js + Plugin for Labels -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>

<script>
document.addEventListener("DOMContentLoaded", async function () {
  const ctx = document.getElementById("tempChart").getContext("2d");
  const tempElem = document.getElementById("currentTemp");
  const descElem = document.getElementById("description");
  const humElem = document.getElementById("humidity");
  const windElem = document.getElementById("wind");
  const loading = document.getElementById("loading");
  let chart;

  async function fetchWeather() {
    loading.style.display = "block";
    const response = await fetch("/weather-data/");
    const data = await response.json();
    loading.style.display = "none";
    return data;
  }

  async function updateWeather() {
    const data = await fetchWeather();
    if (!data.success) return;

    tempElem.textContent = `${data.current_temp}Â°C`;
    descElem.textContent = data.description;
    humElem.textContent = `${data.humidity}%`;
    windElem.textContent = `${data.wind} km/h`;

    if (chart) {
      chart.data.labels = data.labels;
      chart.data.datasets[0].data = data.temps;
      chart.update();
    } else {
      chart = new Chart(ctx, {
        type: "line",
        data: {
          labels: data.labels,
          datasets: [{
            label: "Temperature (Â°C)",
            data: data.temps,
            borderColor: "#007BFF",
            backgroundColor: "rgba(0, 123, 255, 0.1)",
            borderWidth: 3,
            tension: 0.4,
            fill: true,
            pointRadius: 5,
            pointBackgroundColor: "#007BFF",
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          animation: { duration: 1000, easing: 'easeInOutQuart' },
          plugins: {
            title: {
              display: true,
              text: "Hourly Forecast (Next 24 Hours)",
              color: "#333",
              font: { size: 18, weight: 'bold' }
            },
            legend: { display: false },
            tooltip: {
              backgroundColor: '#007BFF',
              titleColor: '#fff',
              bodyColor: '#fff',
              callbacks: {
                label: ctx => `${ctx.parsed.y}Â°C`
              }
            },
            datalabels: {
              color: "#000",
              align: "top",
              font: { weight: 'bold', size: 12 },
              formatter: value => `${value}Â°`
            }
          },
          scales: {
            x: {
              ticks: { color: '#333', font: { size: 12 } },
              grid: { color: 'rgba(0,0,0,0.05)' }
            },
            y: {
              ticks: { color: '#333', font: { size: 12 } },
              grid: { color: 'rgba(0,0,0,0.05)' }
            }
          }
        },
        plugins: [ChartDataLabels]
      });
    }
  }

  await updateWeather();
  setInterval(updateWeather, 600000); // every 10 mins
});
</script>
</script>




 <!-- closes "Join the Mission for a Sustainable Planet" -->

<!-- Services Section -->
<section class="service">
  <div class="container">
    <div class="row">
      <div class="col-12 text-center">
        <div class="section-title">
          <h2>Our Weather Services</h2>
          <p>
            From daily forecasts to detailed climate analysis â€” our platform provides tools for weather tracking,
            research, and sustainability projects.
          </p>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-lg-3 col-md-4 col-sm-6">
        <div class="service-item">
          <i class="ion-ios-sunny"></i>
          <h4>Live Weather Updates</h4>
          <p>Stay informed with real-time weather conditions, alerts, and live temperature tracking.</p>
        </div>
      </div>

      <div class="col-lg-3 col-md-4 col-sm-6">
        <div class="service-item">
          <i class="ion-ios-rainy"></i>
          <h4>Rain & Storm Alerts</h4>
          <p>Get notified about severe weather conditions like heavy rain, storms, and cyclones near you.</p>
        </div>
      </div>

      <div class="col-lg-3 col-md-4 col-sm-6">
        <div class="service-item">
          <i class="ion-ios-cloudy-night"></i>
          <h4>7-Day Forecast</h4>
          <p>Plan ahead with accurate 7-day weather predictions for any global location.</p>
        </div>
      </div>

      <div class="col-lg-3 col-md-4 col-sm-6">
        <div class="service-item">
           <i class="ion-ios-rainy"></i>
          <h4>Climate Research</h4>
          <p>Explore global climate trends, data analytics, and environmental change patterns.</p>
        </div>
      </div>

      <div class="col-lg-3 col-md-4 col-sm-6">
        <div class="service-item">
          <i class="ion-ios-speedometer"></i>
          <h4>Air Quality Index</h4>
          <p>Monitor air pollution levels in real-time and take steps towards healthier living.</p>
        </div>
      </div>

      <div class="col-lg-3 col-md-4 col-sm-6">
        <div class="service-item">
           <i class="bi bi-globe-asia-australia"></i>
          <h4>Satellite Imagery</h4>
          <p>Visualize cloud movements and weather systems using live satellite imagery.</p>
        </div>
      </div>

      <div class="col-lg-3 col-md-4 col-sm-6">
        <div class="service-item">
           <i class="bi bi-thermometer-sun"></i>
          <h4>Temperature Trends</h4>
          <p>Compare temperature patterns across different cities and time periods.</p>
        </div>
      </div>

      <div class="col-lg-3 col-md-4 col-sm-6">
        <div class="service-item">
           <i class="bi bi-droplet-fill"></i>
          <h4>Ocean & Humidity Data</h4>
          <p>Track humidity, sea temperature, and wave data from coastal weather stations.</p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Call to Action -->
<section class="call-to-action bg-1 section-sm overly"
         style="position: relative;
                background-image: url('/static/images/picture.jpg');
                background-size: cover;
                background-position: center;
                background-repeat: no-repeat;
                color: white;
                padding: 80px 0;">

  <!-- Very light overlay (almost full brightness) -->
  <div style="position: absolute;
              top: 0; left: 0;
              width: 100%; height: 100%;
              background: rgba(0, 0, 0, 0.05);
              z-index: 1;"></div>

  <div class="container" style="position: relative; z-index: 2;">
    <div class="row">
      <div class="col-md-12 text-center">
        <div class="block">
          <h2 class="mb-3" style="color:white;">Join the Mission for a Sustainable Planet</h2>
          <p style="color:whitesmoke;">
            Together, we can make a difference. Learn more about how climate change affects our world and how
            we can adapt to build a resilient future for generations to come.
          </p>
          <a href="feedback"
             style="background: #6c757d;
                    color: #fff;
                    padding: 12px 28px;
                    border-radius: 30px;
                    text-decoration: none;
                    font-weight: 600;
                    transition: all 0.3s ease;
                    display: inline-block;">
            Share Your Climate Story
          </a>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Hover effect -->
<style>
  a[href="feedback"]:hover {
    background: #5a6268;
    transform: translateY(-2px);
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
  }
</style>

{% endblock %}
