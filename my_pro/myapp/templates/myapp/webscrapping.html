{% extends "master.html" %}
{% block content %}

<style>
  body {
    background-color: #f7f7f7;
    color: #333;
    font-family: "Poppins", sans-serif;
  }

  /* Page Title */
  .page-title {
    position: relative;
    background: url('/static/images/weather-banner.jpg') center/cover no-repeat;
    color: #fff;
    text-align: center;
    padding: 80px 0;
  }
  .page-title::after {
    content: "";
    position: absolute;
    top:0; left:0; right:0; bottom:0;
    background: rgba(0,0,0,0.45);
  }
  .page-title .container { position: relative; z-index: 2; }
  .page-title h1 { font-weight: 700; letter-spacing: 1px; }
  .page-title p { color: #e0e0e0; }

  /* Cards */
  .card {
    background-color: #fff;
    color: #333;
    border: 1px solid #e0e0e0;
    border-radius: 15px;
    transition: all 0.3s ease-in-out;
  }
  .card:hover {
    transform: translateY(-5px);
    box-shadow: 0 6px 20px rgba(0,0,0,0.1);
  }

  .forecast-card {
    background: linear-gradient(145deg, #f0f0f0, #ffffff);
    border: 1px solid #e5e5e5;
    color: #333;
  }

  h2 { color: #444; font-weight: 600; }
  hr { border-top: 2px solid #ddd; }

  /* Links */
  .card a { color: #00796b; text-decoration: none; font-weight: 600; }
  .card a:hover { text-decoration: underline; }

</style>

<!-- Page Header -->
<section class="page-title">
  <div class="container">
    <h1>Weather & Climate Updates</h1>
    <p>Latest forecasts and news for {{ requested_city }}</p>
    <p style="font-size: 0.9rem;">Data source: {{ forecast.source|title }}, Time: {{ now }}</p>
  </div>
</section>

<section class="section">
  <div class="container mt-4">

    <!-- Current Weather -->
    {% if forecast %}
      <div class="card mb-4 p-4 text-center shadow-sm">
        <h2>Current Weather in {{ forecast.city|default:"Unknown City" }}</h2>
        <p class="fs-5">
          üå°Ô∏è {{ forecast.current.temp }}¬∞C ‚Äî {{ forecast.current.description|title }} <br>
          üíß Humidity: {{ forecast.current.humidity }}% &nbsp;&nbsp; üí® Wind: {{ forecast.current.wind }} km/h
        </p>
      </div>

      <!-- 5-Day Forecast -->
      <div class="row">
        {% for day in forecast.daily %}
          <div class="col-md-4 mb-4">
            <div class="card forecast-card text-center p-3 border-0">
              <h5 class="fw-bold">{{ day.date }}</h5>
              <p>{{ day.condition|title }}</p>
              <p>Min: {{ day.temp_min }}¬∞C | Max: {{ day.temp_max }}¬∞C</p>
            </div>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <p class="text-danger text-center">‚ö†Ô∏è Weather data not available right now.</p>
    {% endif %}

    <hr>

    <!-- Weather News -->
    <h2 class="mt-5 text-center">üì∞ Latest Weather News</h2>
    <div class="row mt-3">
      {% if news_items %}
        {% for news in news_items %}
          <div class="col-md-4 mb-4">
            <div class="card p-3 shadow-sm h-100">
              <h5><a href="{{ news.link }}" target="_blank">{{ news.title }}</a></h5>
              <small class="text-muted">{{ news.published }}</small>
              <p>{{ news.summary }}</p>
            </div>
          </div>
        {% endfor %}
      {% else %}
        <p class="text-center">No news items available.</p>
      {% endif %}
    </div>

  </div>
</section>

{% endblock %}
